async function loadIndexData(){const e=getCurrentLang(),[t,n]=await Promise.all([loadTranslations("/assets/i18n/reviews.json",e),loadTranslations("/assets/i18n/translations-index.json",e)]);if(n){$(".introTitle").text(n.intro.title),$(".introContent").text(n.intro.content),$("#businessEcosystemTitle").text(n.businessEcosystem.title),$("#businessEcosystemContent").text(n.businessEcosystem.content),$("#discoverTitle").text(n.discover.title),$("#discoverContent").text(n.discover.content),$("#paintingCostTitle").text(n.paintingCost.title),$("#paintingCostContent").text(n.paintingCost.content),$("#deskToPocketTitle").text(n.deskToPocket.title),$("#deskToPocketContent").text(n.deskToPocket.content),$("#faqTitle").text(n.faq.title),$("#faqContent").text(n.faq.content);var i=$("#city").data("city");if(i){let e=n.paintersListPage.title.replace("%CITY%",i),t=n.paintersListPage.content.replace("%CITY%",i);$(".paintersListPageTitle").text(e),$(".paintersListPageContent").text(t)}$(".cityListPageTitle").text(n.cityListPage.title),$(".cityListPageContent").text(n.cityListPage.content)}t&&(displayRandomReviews(t),setTimeout((()=>{displayReviews(t)}),2e3)),setTimeout((async()=>{const t=await loadTranslations("/assets/i18n/FAQ.json",e);t&&displayFAQs(t)}),3e3)}async function setRandomBackgroundImg(){try{const e=await fetch("/assets/images/banners/index.json"),t=await e.json();document.getElementById("hero-section").style.backgroundImage=`url(${t.random(t.length)})`}catch(e){document.getElementById("hero-section").style.backgroundImage='url("../assets/images/banners/banner-bg.webp")'}}function displayRandomReviews(e){if(e.length<3)return;const t=Math.floor(Math.random()*e.length);let n=Math.floor(Math.random()*e.length),i=Math.floor(Math.random()*e.length);for(;n===t;)n=Math.floor(Math.random()*e.length);for(;i===t||i===n;)i=Math.floor(Math.random()*e.length);const s=[e[t],e[n],e[i]];$("#heroSectionReviews").empty();const a=s.map(((e,t)=>{const n=e.rating/5*100,i=10*Math.round(n/10)+"%";if(!(window.innerWidth<768&&2===t))return`\n      <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 position-relative">\n  \n      \x3c!-- Content div --\x3e\n      <div class="review-content"> \n        \x3c!-- Web view --\x3e\n        <div class="px-3 d-none d-lg-block">\n          <div class="reviews-stars stars-outer">\n            <div class="reviews-stars stars-inner" style="width: ${i}" ></div>\n          </div> - "<i>${e.review.length>200?e.review.substring(0,200)+"...":e.review}</i>" <br> ${e.title}, ${e.name}.\n        </div>\n      </div>\n  \n      \x3c!-- Mobile view --\x3e\n      ${t<2?`<div class="d-sm-block d-xs-block d-md-none d-lg-none">\n      <div class="stars-outer"> \n        <div class="stars-inner" style="width: ${i}" ></div>\n      </div> - "<i>${e.review.length>40?e.review.substring(0,40)+"...":e.review}</i>" <br> ${e.title}, ${e.name}.\n      </div>\n  \n      \x3c!-- Tablet view --\x3e\n      <div class="d-none d-sm-none d-md-block d-lg-none">\n        <div class="stars-outer"> \n          <div class="stars-inner" style="width: ${i}" ></div>\n        </div> - "<i>${e.review.length>140?e.review.substring(0,140)+"...":e.review}</i>" <br> ${e.title}, ${e.name}.\n      </div>`:""}\n      \x3c!-- Vertical line --\x3e\n          ${1==t||2==t?'<div class="col-lg-1 d-lg-block d-md-none d-sm-none d-xs-none vertical-line"></div>':""} \n      </div>\n           ${0==t?'<div class="horizontal-line col-sm-2 col-md-2 d-lg-none"> <hr /></div>':""}\n      `})).join("");$("#heroSectionReviews").html(a)}function displayReviews(e){let t="",n=200;$("#customerSlider").empty(),e.forEach(((e,i)=>{t=`\n           <div data-aos="fade-up" data-aos-duration="600" data-aos-delay="${n}">\n                  <div class="customer-unit">\n                      <div class="customer-avatar">\n                          <img loading="lazy" src=${e.image} width="180" height="180" alt="avatar" />\n                      </div>\n                      <h4>${e.name}</h4>\n                      <p>${e.title}</p>\n                      <h5>“${e.review}”</h5>\n                  </div>\n            </div>\n  \n        `,n+=100,$("#customerSlider").slick("slickAdd",t)})),$("#customerSlider").fadeIn().slick("refresh")}function getCurrentLang(){let e="de";return $("html").is(":lang(en-CH)")&&(e="en"),$("html").is(":lang(it-CH)")&&(e="it"),$("html").is(":lang(fr-CH)")&&(e="fr"),e}async function loadTranslations(e,t){try{const n=await fetch(e),i=await n.json();return i[t]}catch(e){console.error("Error:",e)}}function displayFAQs(e){let t="";$("#FAQsAccordion").empty(),e.forEach(((e,n)=>{t+=`\n            <div class="accordion-item ${n>4?"d-none":""}">\n                <div class="accordion-header" id="faq-heading-${n}">\n                    <div class="btn accordion-items" role="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-${n}" aria-expanded="false" aria-controls="faq-collapse-${n}">\n                      ${e.question}  <span class="accordion-icon"></span> \n                    </div>\n                </div>\n                <div class="accordion-collapse collapse" id="faq-collapse-${n}" aria-labelledby="faq-heading-${n}" data-bs-parent="#FAQsAccordion">\n                    <div class="accordion-body">${e.answer}</div>\n                </div>\n            </div>\n      `})),$("#FAQsAccordion").append(t)}function loadAllFAQs(){$(".FAQ .accordion-item").removeClass("d-none"),$("#load-all-faqs").addClass("d-none")}async function calculatePrice(){try{const e=$("#postalCode").val();if(e.length<4)return;$("#plzSearch").addClass("disabled");const t={flat_size:120,nr_rooms:3.5,ceiling_height:2.4,walls:!0,ceiling:!0,postal_code:e,smoking_room:!1},n=await axios.post("https://europe-west6-gm-b2b2c.cloudfunctions.net/price_calculator",t);if(!n.data)return;$("#foundPainters").text(n.data.total_painters),$("#project-details-modal").modal("show"),$("#plzSearch").removeClass("disabled")}catch(e){console.error(e),$("#plzSearch").removeClass("disabled")}}function initializeSlickSlider(){var e=$("#customerSlider");e.length>0&&!e.hasClass("slick-initialized")&&$("#customerSlider").slick({lazyLoad:"ondemand",infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})}$(document).ready((function(){loadIndexData(),setTimeout((function(){setRandomBackgroundImg(),initializeSlickSlider()}),500)}));
